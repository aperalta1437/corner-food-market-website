CREATE TABLE CUSTOMER(
  ID SMALLSERIAL,
  EMAIL VARCHAR(254) NOT NULL UNIQUE,
  PASSWORD VARCHAR(64) NOT NULL,
  FIRST_NAME VARCHAR(25) NOT NULL,
  MIDDLE_NAME VARCHAR(25),
  LAST_NAME VARCHAR(35) NOT NULL,
  CELL_PHONE_NUMBER VARCHAR(15),
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID)
);

CREATE TABLE CUSTOMER_ADDRESS(
  ID SERIAL,
  CUSTOMER_ID SMALLINT NOT NULL,
  ADDRESS_LINE_1 VARCHAR(50) NOT NULL,
  ADDRESS_LINE_2 VARCHAR(25),
  CITY VARCHAR(35) NOT NULL,
  STATE_CODE CHAR(2),
  POSTAL_CODE VARCHAR(10) NOT NULL,
  COUNTRY_ALPHA2_CODE CHAR(2) NOT NULL,
  TELEPHONE_NUMBER VARCHAR(15),
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID),
  CONSTRAINT FK_CUSTOMER
    FOREIGN KEY(CUSTOMER_ID)
        REFERENCES CUSTOMER(ID)
--  CONSTRAINT FK_COUNTRY_CODE
--      FOREIGN KEY(COUNTRY_ALPHA2_CODE)
--          REFERENCES COUNTRY_CODE(ALPHA2_CODE)
);

--CREATE TABLE COUNTRY_CODE(
--  ID SMALLSERIAL,
--  ALPHA2_CODE CHAR(2) NOT NULL UNIQUE,
--  ALPHA3_CODE CHAR(3) NOT NULL UNIQUE,
--  NUMERIC_CODE CHAR(3) NOT NULL UNIQUE,
--  COUNTRY_NAME VARCHAR(50) NOT NULL,
--  PRIMARY KEY(ID)
--);

CREATE TABLE PRODUCT_INVENTORY(
  ID SMALLSERIAL,
  QUANTITY SMALLINT NOT NULL,
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  DELETED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID)
);

CREATE TABLE PRODUCT_CATEGORY(
  ID SMALLSERIAL,
  NAME VARCHAR(50) NOT NULL UNIQUE,
  DESCRIPTION TEXT NOT NULL,
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  DELETED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID)
);

CREATE TABLE DISCOUNT(
  ID SMALLSERIAL,
  NAME VARCHAR(50) NOT NULL,
  DESCRIPTION TEXT NOT NULL,
  IS_PERCENTAGE_BASED BOOLEAN NOT NULL,
  DISCOUNT_PERCENT DECIMAL NOT NULL,
  DISCOUNT_AMOUNT DECIMAL NOT NULL,
  IS_ACTIVE BOOLEAN NOT NULL,
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  DELETED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID)
);

CREATE TABLE PRODUCT(
  ID SMALLSERIAL,
  NAME VARCHAR(50) NOT NULL,
  DESCRIPTION TEXT NOT NULL,
  SKU VARCHAR(12) NOT NULL UNIQUE,
  CATEGORY_ID SMALLINT NOT NULL,
  INVENTORY_ID SMALLINT NOT NULL,
  PRICE DECIMAL NOT NULL,
  DISCOUNT_ID SMALLINT,
  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE,
  DELETED_AT TIMESTAMP WITHOUT TIME ZONE,
  PRIMARY KEY(ID),
  CONSTRAINT FK_PRODUCT_CATEGORY
      FOREIGN KEY(CATEGORY_ID)
          REFERENCES PRODUCT_CATEGORY(ID),
  CONSTRAINT FK_PRODUCT_INVENTORY
        FOREIGN KEY(INVENTORY_ID)
            REFERENCES PRODUCT_INVENTORY(ID),
  CONSTRAINT FK_DISCOUNT
        FOREIGN KEY(DISCOUNT_ID)
            REFERENCES DISCOUNT(ID)
);




--CREATE TABLE USER_PAYMENT(
--  ID SERIAL,
--  USER_ID SMALLINT NOT NULL,
--  PAYMENT_TYPE_ID SMALLINT NOT NULL,
--  PROVIDER VARCHAR(25),
--  ACCOUNT_NO VARCHAR(16) NOT NULL,
--  POSTAL_CODE VARCHAR(10) NOT NULL,
--  COUNTRY VARCHAR(35) NOT NULL,
--  TELEPHONE VARCHAR(15),
--  CREATED_AT TIMESTAMP WITHOUT TIME ZONE,
--  MODIFIED_AT TIMESTAMP WITHOUT TIME ZONE
--  PRIMARY KEY(ID)
--  CONSTRAINT FK_USER
--    FOREIGN KEY(USER_ID)
--        REFERENCES USER(ID)
--);

--ALTER TABLE RESERVATION ADD FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ROOM_ID);
--ALTER TABLE RESERVATION ADD FOREIGN KEY (GUEST_ID) REFERENCES GUEST(GUEST_ID);
--CREATE INDEX IDX_RES_DATE_ ON RESERVATION(RES_DATE);